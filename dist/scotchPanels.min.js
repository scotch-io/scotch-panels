/*
* scotchPanels - v1.0.3 - 2014-09-25
* https://github.com/scotch-io/scotch-panels
* Copyright (c) 2014 Nicholas Cerminara <nick@scotch.io>
*/
!function(a){"use strict";var b=[],c=!1,d=!1,e=!1,f={containerSelector:"body",type:"html",direction:"top",duration:300,transition:"ease",easingPluginTransition:"easeInCirc",useCSS:!0,useEasingPlugin:!1,imageURL:!1,iframeURL:!1,autoPlayVideo:!0,youtubeID:!1,youTubeTheme:"light",distanceX:"70%",forceMinHeight:!1,minHeight:"200px",closeAfter:0,startOpened:!1,startOpenedDelay:0,clickSelector:!1,enableEscapeKey:!0,hoverSelector:!1,touchSelector:!1,beforePanelOpen:function(){},afterPanelOpen:function(){},beforePanelClose:function(){},afterPanelClose:function(){}};a.fn.scotchPanel=function(g){if("undefined"==typeof g&&(g={}),0===this.length)return this;if(this.length>1)return this.each(function(){b.push(a(this).scotchPanel(g))}),b.open=function(){for(var a=0;a<b.length;a++)b[a].open()},b.close=function(){for(var a=0;a<b.length;a++)b[a].close()},b.toggle=function(){for(var a=0;a<b.length;a++)b[a].toggle()},b;var h={};h=this;var i=function(){c||(c=!0,d=k.transition(),e=k.translate3d());for(var b in f)f.hasOwnProperty(b)&&h.attr("data-"+b.toLowerCase())&&(g[b]=h.data(b.toLowerCase()));h.settings=a.extend({},f,g),j()},j=function(){var b=a(h.settings.containerSelector);b.hasClass("scotchified")||b.wrapInner('<div class="scotch-panel-wrapper"><div class="scotch-panel-canvas"></div></div>').addClass("scotchified"),a(".scotch-panel-wrapper").css({position:"relative",overflow:"hidden",width:"100%"}),a(".scotch-panel-canvas").css({position:"relative",height:"100%",width:"100%"}),h.settings.useCSS&&a(".scotch-panel-canvas").css({"-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"top"==h.settings.direction&&(h.height=h.height(),h.addClass("scotch-panel-top"),h.css({bottom:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"bottom"==h.settings.direction&&(h.height=h.height(),h.addClass("scotch-panel-bottom"),h.css({top:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"left"==h.settings.direction&&(h.addClass("scotch-panel-left"),h.css({top:"0",left:"-"+h.settings.distanceX,width:h.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),"right"==h.settings.direction&&(h.addClass("scotch-panel-right"),h.css({top:"0",right:"-"+h.settings.distanceX,width:h.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})),h.css({"-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"}),"image"==h.settings.type&&h.settings.imageURL&&(h.css({"-o-background-size":"cover","-ms-background-size":"cover","-moz-background-size":"cover","-webkit-background-size":"cover","background-size":"cover","background-position":"50% 0","background-repeat":"no-repeat","background-image":"url("+h.settings.imageURL+")"}),("top"==h.settings.direction||"bottom"==h.settings.direction)&&(h.css("min-height",h.settings.minHeight),h.height=a(h).height())),"iframe"==h.settings.type&&h.settings.iframeURL&&(h.iframeIsLoaded=!1,h.append('<iframe frameborder="0" style="width: 100%; height: 100%; display: block; position: relative; min-height: '+h.settings.minHeight+'" allowfullscreen></iframe>'),("top"==h.settings.direction||"bottom"==h.settings.direction)&&(h.height=a(h).height())),"video"==h.settings.type&&h.settings.youtubeID&&(h.append('<div id="video-id-'+h.settings.youtubeID+'" style="min-height: '+h.settings.minHeight+'; display: block !important;"><iframe src="//www.youtube.com/embed/'+h.settings.youtubeID+"?enablejsapi=1&theme="+h.settings.youTubeTheme+'" frameborder="0" style="width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;" allowfullscreen></iframe></div>'),("top"==h.settings.direction||"bottom"==h.settings.direction)&&(h.height=a(h).height())),d&&e&&m(h.settings.transition,h.settings.duration),h.settings.startOpened&&setTimeout(function(){h.open()},h.settings.startOpenedDelay),0!=h.settings.closeAfter&&setTimeout(function(){h.close()},h.settings.closeAfter)},k={transition:function(){if(!window.getComputedStyle)return!1;var a=document.body||document.documentElement,b=a.style,c="transition";if("string"==typeof b[c])return!0;var d=["Moz","webkit","Webkit","Khtml","O","ms"];c=c.charAt(0).toUpperCase()+c.substr(1);for(var e=0;e<d.length;e++)if("string"==typeof b[d[e]+c])return!0;return!1},translate3d:function(){if(!window.getComputedStyle)return!1;var a,b;return a=document.createElement("p"),a.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",a.style.margin="0",document.body.insertBefore(a,document.body.lastChild),b=window.getComputedStyle(a).getPropertyValue("transform"),void 0!==b?"none"!==b:!1}},l=function(a,b){var c=document.getElementById(a),d=c.getElementsByTagName("iframe")[0].contentWindow;c.style.display="hide"==b?"none":"";var e="hide"==b?"pauseVideo":"playVideo";d.postMessage('{"event":"command","func":"'+e+'","args":""}',"*"),c.style.display="block"},m=function(a,b){h.parents(".scotch-panel-canvas:first").css({"-ms-transition":"all "+b+"ms "+a,"-moz-transition":"all "+b+"ms "+a,"-o-transition":"all "+b+"ms "+a,"-webkit-transition":"all "+b+"ms "+a,transition:"all "+b+"ms "+a})},n=function(a){h.settings.forceMinHeight&&h.parents(".scotch-panel-canvas:first").css("min-height",a),d&&e&&h.settings.useCSS?(h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.beforePanelOpen():h.settings.beforePanelClose(),h.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d(0, "+a+"px, 0)","-moz-transform":"translate3d(0, "+a+"px, 0)","-o-transform":"translate3d(0, "+a+"px, 0)","-webkit-transform":"translate3d(0, "+a+"px, 0)",transform:"translate3d(0, "+a+"px, 0)"}),setTimeout(function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()},h.settings.duration)):(h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.beforePanelOpen():h.settings.beforePanelClose(),h.settings.useEasingPlugin?h.parents(".scotch-panel-canvas:first").animate({top:a+"px"},{duration:h.settings.duration,easing:h.settings.easingPluginTransition,complete:function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()}}):h.parents(".scotch-panel-canvas:first").animate({top:a+"px"},h.settings.duration,function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()}))},o=function(a){d&&e&&h.settings.useCSS?(h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.beforePanelOpen():h.settings.beforePanelClose(),h.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d("+a+", 0, 0)","-moz-transform":"translate3d("+a+", 0, 0)","-o-transform":"translate3d("+a+", 0, 0)","-webkit-transform":"translate3d("+a+", 0, 0)",transform:"translate3d("+a+", 0, 0)"}),setTimeout(function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()},h.settings.duration)):(h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.beforePanelOpen():h.settings.beforePanelClose(),h.settings.useEasingPlugin?h.parents(".scotch-panel-canvas:first").animate({left:a},{duration:h.settings.duration,easing:h.settings.easingPluginTransition,complete:function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()}}):h.parents(".scotch-panel-canvas:first").animate({left:a},h.settings.duration,function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.settings.afterPanelOpen():h.settings.afterPanelClose()}))};return h.open=function(){h.parents(".scotch-panel-canvas:first").addClass("scotch-is-showing"),"iframe"==h.settings.type&&h.settings.iframeURL&&!h.iframeIsLoaded&&(h.iframeIsLoaded=!0,h.find("iframe").attr("src",h.settings.iframeURL)),"video"==h.settings.type&&h.settings.youtubeID&&h.settings.autoPlayVideo&&l("video-id-"+h.settings.youtubeID,""),"top"==h.settings.direction&&n(h.height),"bottom"==h.settings.direction&&n("-"+h.height),"left"==h.settings.direction&&o(h.settings.distanceX),"right"==h.settings.direction&&o("-"+h.settings.distanceX)},h.close=function(){h.parents(".scotch-panel-canvas:first").removeClass("scotch-is-showing"),setTimeout(function(){"video"==h.settings.type&&h.settings.youtubeID&&h.settings.autoPlayVideo&&l("video-id-"+h.settings.youtubeID,"hide")},h.settings.duration),("top"==h.settings.direction||"bottom"==h.settings.direction)&&n(0),("left"==h.settings.direction||"right"==h.settings.direction)&&o(0)},h.toggle=function(){h.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")?h.close():h.open()},i(),a(document).keyup(function(a){27==a.keyCode&&h.settings.enableEscapeKey&&h.close()}),h.settings.hoverSelector&&a(h.settings.hoverSelector).hover(function(){h.open()},function(){h.close()}),h.settings.clickSelector&&a(h.settings.clickSelector).click(function(){return h.toggle(),!1}),h.settings.touchSelector&&a(h.settings.touchSelector).on("touchstart",function(){return h.toggle(),!1}),h}}(jQuery);